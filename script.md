我现在需要处理一些实体之间的关系:
- 用户
- 群组
- 消息
  
当前进程对应单单一个用户的聊天视图, 需要加载这个用户所在的所有群组, 因此GroupChatTab需要存储所有群组的信息
群组的信息就是三个: groupId, groupName, creatorId
用一个map维护即可, 信息可以在登录的时候从后端获取, 也可以自己处理所有的历史消息(采取第一种比较好)

每个会话维护一个群组的信息, 以及群组的任务交互方法(通过总线和messageProcessor连接). 由于button定义在父类GroupChatTab中, 所以用按钮的按下事件连接父类的方法, 这个父类方法找到GroupChatSession, 然后调用其中的public的任务交互方法, 注意生成任务id, 插入到一个map中. 

这个map需要维护一个任务id:任务的队列, 如果后端返回任务id成功的响应体, 才在session中进行对应的处理

消息的编辑和发送都在session中处理即可, 不是很复杂, 可以直接照抄之前的实现

先完成最简单的消息的编辑和发送栏

消息编辑和发送的逻辑已经完成

目前完成了前端解析几种群组消息的方式(发送, 接受, 历史消息), 以及群组信息的初始化

现在需要处理groupchattab中处理按钮的事件逻辑... 需要用编号表示不同的事件, 存储事件类

其实相当于手动维护一个异步逻辑

其实前面的消息发送之类的都应该有这个逻辑, 只是我没有处理而已



1. 群组更新之后, 需要广播到所有用户, 进行操作, 比如群主删除群组之后需要显示一下之类的. 这确实是一个问题, 包括操作者用户也要更新数据
